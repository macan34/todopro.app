<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TodoPro - Kolaborasi</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>

<body>
  <header>
    <h1>📝 TodoPro</h1>
  </header>

  <div class="container">
    <div id="authSection" class="card">
      <h2>🚀 Mari Berkolaborasi</h2>
      <input type="text" id="userName" placeholder="Masukkan nama Anda">
      <div class="auth-buttons">
        <button onclick="createRoom()">🎯 Buat Room (Mentor)</button>
        <input type="text" id="roomIdInput" placeholder="Room ID untuk bergabung">
        <button onclick="joinRoom()">🤝 Gabung Room (Member)</button>
      </div>
    </div>

    <div id="app" class="hidden">
      <div class="card">
        <h2 id="roomTitle">🏠 Room</h2>
        <p id="userRole" style="color: #667eea; font-weight: 500;"></p>
        <p style="margin-top: 0.5rem;">Status: <span id="status" class="status offline">Offline</span></p>
        
        <!-- Member List -->
        <div id="memberList" class="member-list">
          <h4>👥 Anggota Room</h4>
          <div id="memberContainer">
            <!-- Members akan muncul di sini -->
          </div>
        </div>
      </div>

      <div id="todoSection" class="card">
        <h3>📋 Daftar Tugas</h3>
        <div id="addTodoForm" class="add-todo-form hidden">
          <input type="text" id="todoTitle" placeholder="Judul tugas...">
          <input type="text" id="todoDesc" placeholder="Deskripsi tugas...">
          <button onclick="addTodo()">➕ Tambah Tugas</button>
        </div>
        <div id="memberInfo" class="hidden" style="background: #f0f9ff; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border: 1px solid #bae6fd;">
          <p style="color: #0369a1; margin: 0; font-size: 0.9rem;">
            💡 <strong>Member:</strong> Centang tugas untuk menandai Anda telah menyelesaikannya. Tugas akan selesai jika semua member mencentang.
          </p>
        </div>
        <div id="todoList">
          <div class="empty-state">
            <p>Belum ada tugas</p>
            <small>Mentor akan menambahkan tugas untuk Anda!</small>
          </div>
        </div>
      </div>

      <button onclick="logout()" class="logout-btn">🚪 Keluar Room</button>
    </div>
  </div>

  <!-- Load JavaScript files -->
  <script src="js/storage.js"></script>
  <script src="js/networking.js"></script>
  <script src="js/todo.js"></script>
  <script src="js/comments.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>